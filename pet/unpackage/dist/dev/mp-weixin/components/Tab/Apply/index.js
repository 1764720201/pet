"use strict";var e=require("../../../common/vendor.js");if(!Array){const d=e.resolveComponent("unicloud-db"),a=e.resolveComponent("uni-load-more"),r=e.resolveComponent("uni-popup-dialog"),c=e.resolveComponent("uni-popup");(d+a+r+c)()}const j=()=>"../../../node-modules/@dcloudio/uni-components/lib/unicloud-db/unicloud-db.js",E=()=>"../../../uni_modules/uni-load-more/components/uni-load-more/uni-load-more.js",k=()=>"../../../uni_modules/uni-popup/components/uni-popup-dialog/uni-popup-dialog.js",T=()=>"../../../uni_modules/uni-popup/components/uni-popup/uni-popup.js";Math||(j+E+k+T)();const F=e.defineComponent({__name:"index",props:{where:{type:String,required:!0}},setup(d){const a=d,r=e.pn.getCurrentUserInfo().uid,{where:c}=e.toRefs(a),u=e.ref(!0);e.watch(()=>c.value,()=>{c.value!=`state=='\u7533\u8BF7\u4E2D'&&user_id=='${r}'`?u.value=!1:u.value=!0});const D=e.pn.database(),h=p=>{e.index.navigateTo({url:`/pages/Mine/Request/Apply/ApplyDetail/index?inApplyId=${p}`})},s=e.ref(null);e.onPullDownRefresh(()=>{s.value.loadData(()=>{e.index.stopPullDownRefresh()})}),e.onReachBottom(()=>{s.value.loadMore()});const w=p=>{e.index.navigateTo({url:`/pages/ApplyAdopt/Apply/index?adoptId=${p}`})},f=e.ref(null),g=e.ref(),x=p=>{var _;g.value=p,(_=f.value)==null||_.open("center")};e.ref([]);const A=async()=>{await D.collection("apply").where(`_id=='${g.value}'`).update({state:"\u5DF2\u53D6\u6D88"}).then(()=>{s.value.refresh(),e.index.showToast({title:"\u6210\u529F\u53D6\u6D88\u8BE5\u7533\u8BF7",icon:"none"})})};return(p,_)=>({a:e.w(({data:C,pagination:q,loading:t,error:m,options:z,hasMore:l},B,n)=>e.e({a:m},m?{b:e.t(m.message)}:e.e({c:e.f(C,(i,P,b)=>({a:e.w(({data:o,loading:U,error:v,options:M},I,$)=>e.e({a:v},v?{b:e.t(v.message)}:e.e({c:o==null?void 0:o.img[0].url,d:e.t(o==null?void 0:o.pet_name),e:e.t(o==null?void 0:o.variety),f:u.value},u.value?{g:e.o(y=>w(o==null?void 0:o._id))}:{},{h:e.o(y=>h(i._id)),i:u.value},u.value?{j:e.o(y=>x(i._id))}:{}),{k:$,l:I}),{name:"d",path:"a["+n+"]."+("c["+b+"].")+"a",vueId:"2bc3db4c-1-"+n+"-"+b+",2bc3db4c-0"}),b:"2bc3db4c-1-"+n+"-"+b+",2bc3db4c-0",c:e.p({collection:"adoption",field:"_id,pet_name,img,variety,adopt_id",getone:!0,where:`_id=='${i.adopt_id}'`}),d:i._id})),d:t},t?{e:"2bc3db4c-2-"+n+",2bc3db4c-0",f:e.p({status:"loading"})}:{},{g:l&&!t},l&&!t?{h:"2bc3db4c-3-"+n+",2bc3db4c-0",i:e.p({status:"more"})}:!l&&!t?{k:"2bc3db4c-4-"+n+",2bc3db4c-0",l:e.p({status:"noMore"})}:{},{j:!l&&!t}),{m:n,n:B}),{name:"d",path:"a",vueId:"2bc3db4c-0"}),b:e.sr(s,"2bc3db4c-0",{k:"udb"}),c:e.p({collection:"apply",["page-size"]:5,getone:!1,where:e.unref(c)}),d:e.o(A),e:e.p({type:"warn",cancelText:"\u5173\u95ED",confirmText:"\u786E\u5B9A\u53D6\u6D88",title:"\u901A\u77E5",content:"\u4F60\u786E\u5B9A\u8981\u53D6\u6D88\u9886\u517B\u8BE5\u5BA0\u7269\u5417"}),f:e.sr(f,"2bc3db4c-5",{k:"alertDialog"}),g:e.p({type:"dialog"})})}});var R=e._export_sfc(F,[["__scopeId","data-v-2bc3db4c"],["__file","C:/Users/yzc/Desktop/pet/components/Tab/Apply/index.vue"]]);wx.createComponent(R);
