"use strict";var I=require("../../../../../../common/vendor.js");function x(c,i,n,t,r,l){let h;const g=[c+n/2,i+t/2],e=[r,l];return e[0]<=g[0]&&e[1]<=g[1]?h=3:e[0]>=g[0]&&e[1]<=g[1]?h=2:e[0]<=g[0]&&e[1]>=g[1]?h=4:e[0]>=g[0]&&e[1]>=g[1]&&(h=1),h}function y(c,i){let n=c.imageLeft,t=c.imageTop;i=i||c.scale;let r=c.imageWidth,l=c.imageHeight;c.angle/90%2&&(r=c.imageHeight,l=c.imageWidth);const{clipX:h,clipWidth:g,clipY:e,clipHeight:a}=c,s=p=>p*i/2,m=s(r),u=s(l);return n=h+m>=n?n:h+m,n=h+g-m<=n?n:h+g-m,t=e+u>=t?t:e+u,t=e+a-u<=t?t:e+a-u,{left:n,top:t,scale:i}}function v(c,i){i=i||c.scale;let{imageWidth:n,imageHeight:t,clipWidth:r,clipHeight:l,angle:h}=c;return h/90%2&&(n=t,t=n),n*i<r&&(i=r/n),t*i<l&&(i=Math.max(i,l/t)),i}function M(c,i,n){let t=c,r=i,{clipWidth:l,clipHeight:h,sysinfo:g,width:e,height:a}=n;return t&&r?t/r>(l||e)/(l||a)?(r=h||a,t=c/i*r):(t=l||e,r=i/c*t):(t=(g||I.index.getSystemInfoSync()).windowWidth,r=0),{imageWidth:t,imageHeight:r}}function O(c,i){return Math.sqrt(Math.pow(c,2)+Math.pow(i,2))}function S(c,i){const n=i.touches[0].clientX,t=i.touches[0].clientY;let{clipWidth:r,clipHeight:l,clipY:h,clipX:g,clipStart:e,isLockRatio:a,maxWidth:s,minWidth:m,maxHeight:u,minHeight:p}=c;s=s/2,m=m/2,p=p/2,u=u/2;let o=r,f=l,W=h,H=g,w=()=>{o=o<=s?o>=m?o:m:s,f=f<=u?f>=p?f:p:u},d=()=>(w(),!((o>s||o<m||f>u||f<p)&&a));switch(f=e.height+(e.corner>1&&e.corner<4?1:-1)*(e.y-t),e.corner){case 1:if(o=e.width-e.x+n,a&&(f=o/(r/l)),!d())return;break;case 2:if(o=e.width-e.x+n,a&&(f=o/(r/l)),d())W=e.clipY-(f-e.height);else return;break;case 3:if(o=e.width+e.x-n,a&&(f=o/(r/l)),d())W=e.clipY-(f-e.height),H=e.clipX-(o-e.width);else return;break;case 4:if(o=e.width+e.x-n,a&&(f=o/(r/l)),d())H=e.clipX-(o-e.width);else return;break}return{width:o,height:f,clipX:H,clipY:W}}function X(c,i,n){let t=i-c.touchRelative[0].x,r=n-c.touchRelative[0].y;return{left:t,top:r}}exports.calcImageOffset=y;exports.calcImageScale=v;exports.calcImageSize=M;exports.calcPythagoreanTheorem=O;exports.clipTouchMoveOfCalculate=S;exports.determineDirection=x;exports.imageTouchMoveOfCalcOffset=X;
