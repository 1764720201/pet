"use strict";var e=require("../../../../../../common/vendor.js");if(!Array){const r=e.resolveComponent("uni-icons"),n=e.resolveComponent("lgd-tab");(r+n)()}const m=()=>"../../../../../../uni_modules/uni-icons/components/uni-icons/uni-icons.js",f=()=>"../../../../../../uni_modules/lgd-tab/components/lgd-tab/lgd-tab.js";Math||(m+f+v)();const v=()=>"../../../../../../components/Tab/Encyclopedia/PetDetail.js",g=e.defineComponent({__name:"index",setup(r){const n=["\u63CF\u8FF0","\u7279\u70B9","\u6027\u683C\u7279\u5F81","\u6838\u5FC3\u4FE1\u606F","\u5582\u517B\u8981\u70B9"],d=e.ref(0),a=e.ref(""),_=c=>{switch(c){case 0:a.value="desc";break;case 1:a.value="feature";break;case 2:a.value="characterFeature";break;case 3:a.value="careKnowledge";break;case 4:a.value="feedPoints";break}},t=e.reactive({_id:"",pettype:0,name:"",engName:"",characters:"",nation:"",easyOfDisease:"",life:"",price:"",desc:"",feature:"",characterFeature:"",careKnowledge:"",feedPoints:"",url:"",coverURL:""}),s=e.pn.database(),i=e.pn.getCurrentUserInfo().uid,o=e.ref(),p=()=>{o.value?(s.collection("collect").where(`user_id=='${i}'&&pet_id=='${t._id}'`).remove(),l()):e.pn.callFunction({name:"collect",data:{type:3,petId:t._id,userId:i}}).then(()=>{l(),e.index.showToast({title:"\u6536\u85CF\u6210\u529F"})})},l=()=>{s.collection("collect").where(`user_id=='${i}'&&pet_id=='${t._id}'`).get().then(c=>{c.result.data[0]?o.value=!0:o.value=!1})};return e.watch(()=>t._id,()=>{l()}),e.onLoad(c=>{s.collection("pet").where(`_id=='${c.petId}'`).get().then(u=>{Object.assign(t,u.result.data[0])})}),(c,u)=>({a:t.coverURL,b:e.t(t.name),c:e.p({type:"star",size:"15",color:o.value?"red":"#ccc"}),d:e.o(p),e:e.t(t.engName),f:e.t(t.characters),g:e.t(t.nation),h:e.t(t.easyOfDisease),i:e.t(t.price),j:e.t(t.life),k:e.o(_),l:e.p({tabValue:n,tabIndex:d.value,textColor:"#ec8a9e ",underlineColor:"#ec8a9e"}),m:e.p({petId:t._id,field:a.value})})}});var b=e._export_sfc(g,[["__scopeId","data-v-54964e22"],["__file","C:/Users/yzc/Desktop/pet/pages/Home/Knowledge/PopularizationOfScience/Encyclopedia/EncylopediaDetail/index.vue"]]);wx.createPage(b);
