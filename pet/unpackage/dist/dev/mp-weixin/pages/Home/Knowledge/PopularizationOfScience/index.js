"use strict";var e=require("../../../../common/vendor.js");if(!Array){const u=e.resolveComponent("uni-icons"),n=e.resolveComponent("uni-load-more"),c=e.resolveComponent("unicloud-db");(u+n+c)()}const v=()=>"../../../../uni_modules/uni-icons/components/uni-icons/uni-icons.js",h=()=>"../../../../uni_modules/uni-load-more/components/uni-load-more/uni-load-more.js",y=()=>"../../../../node-modules/@dcloudio/uni-components/lib/unicloud-db/unicloud-db.js";Math||(v+h+y)();const g=e.defineComponent({__name:"index",setup(u){const n=e.ref(null),c=e.pn.database();e.onPullDownRefresh(()=>{n.value.loadData(()=>{e.index.stopPullDownRefresh()})}),e.onReachBottom(()=>{n.value.loadMore()});const _=()=>{e.index.navigateTo({url:"/pages/Home/Knowledge/PopularizationOfScience/Encyclopedia/index"})},l=e.ref(0),m=i=>{e.index.navigateTo({url:`/pages/Home/Knowledge/PopularizationOfScience/Knowledge/index?knowledgeId=${i}`,success(){c.collection("petKnowledge").where(`_id=='${i}'`).get({getOne:!0}).then(r=>{l.value=r.result.data.watch}).then(async()=>{await c.collection("petKnowledge").where(`_id=='${i}'`).update({watch:l.value+1}),n.value.refresh()})}})};return(i,r)=>({a:e.p({type:"search",size:"30",color:"white"}),b:e.o(_),c:e.w(({data:p,pagination:x,loading:a,error:d,hasMore:s},b,t)=>e.e({a:d},d?{b:e.t(d.message)}:{c:e.f(p,(o,K,f)=>({a:e.t(o.title),b:"0a8805bd-2-"+t+"-"+f+",0a8805bd-1",c:e.t(o==null?void 0:o.watch),d:o.image,e:o._id,f:e.o(P=>m(o._id),o._id)})),d:e.p({type:"eye",size:"18",color:"#666"})},{e:a},a?{f:"0a8805bd-3-"+t+",0a8805bd-1",g:e.p({status:"loading"})}:{},{h:s&&!a},s&&!a?{i:"0a8805bd-4-"+t+",0a8805bd-1",j:e.p({status:"more"})}:!s&&!a?{l:"0a8805bd-5-"+t+",0a8805bd-1",m:e.p({status:"noMore"})}:{},{k:!s&&!a,n:t,o:b}),{name:"d",path:"c",vueId:"0a8805bd-1"}),d:e.sr(n,"0a8805bd-1",{k:"udb"}),e:e.p({collection:"petKnowledge",field:"_id,title,image,watch",getone:!1,["page-size"]:5})})}});var w=e._export_sfc(g,[["__scopeId","data-v-0a8805bd"],["__file","C:/Users/yzc/Desktop/pet/pages/Home/Knowledge/PopularizationOfScience/index.vue"]]);wx.createPage(w);
