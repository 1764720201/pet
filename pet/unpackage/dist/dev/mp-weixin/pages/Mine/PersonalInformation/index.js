"use strict";var e=require("../../../common/vendor.js");if(!Array){const l=e.resolveComponent("unicloud-db"),t=e.resolveComponent("tui-actionsheet");(l+t)()}const x=()=>"../../../node-modules/@dcloudio/uni-components/lib/unicloud-db/unicloud-db.js",E=()=>"../../../node-modules/thorui-uni/lib/thorui/tui-actionsheet/tui-actionsheet.js";Math||(x+E)();const w=e.defineComponent({__name:"index",setup(l){const t=e.ref(!1),_=e.reactive([{text:"\u7231\u5FC3\u4EBA\u58EB",color:"#2B2B2B"},{text:"\u7231\u5FC3\u6551\u52A9\u4EBA",color:"#2B2B2B"},{text:"\u8D44\u6DF1\u6551\u52A9\u4EBA",color:"#2B2B2B"},{text:"\u5FD7\u613F\u8005",color:"#2B2B2B"},{text:"\u7231\u5FC3\u4E49\u5DE5",color:"#2B2B2B"}]),f=()=>{t.value=!0},v=()=>{t.value=!1},p=o=>{i.collection("uni-id-users").where("_id==$cloudEnv_uid").update({label:o.text}).then(async()=>{e.index.showToast({title:"\u66F4\u6539\u6210\u529F"}),await r(),t.value=!1})},s=e.ref(0),a=e.ref(0),u=e.ref(""),i=e.pn.database(),h=()=>{e.index.navigateTo({url:"/uni_modules/uni-id-pages/pages/userinfo/userinfo"})},c=e.ref("+\u4E2A\u4EBA\u6807\u7B7E"),r=async()=>{await i.collection("uni-id-users").where("_id==$cloudEnv_uid").field("label").get({getOne:!0}).then(o=>{o.result.data.label&&(c.value=o.result.data.label)})};e.onLoad(()=>{r()}),e.onShow(async()=>{u.value=e.pn.getCurrentUserInfo().uid,await i.collection("collect").where(`user_id=='${u.value}'&&type!=4`).get().then(o=>{s.value=o.result.data.length}),await i.collection("footprint").where(`user_id=='${u.value}'`).field("adopt_id,found_id").distinct().get().then(o=>{a.value=o.result.data.length})});const m=()=>{e.index.navigateTo({url:"/pages/Mine/PersonalInformation/Collect/index"})},B=()=>{e.index.navigateTo({url:"/pages/Mine/PersonalInformation/Footprint/index"})};return(o,y)=>({a:e.w(({data:n},g,b)=>{var d;return{a:e.t(n==null?void 0:n.nickname),b:(d=n==null?void 0:n.avatar_file)==null?void 0:d.url,c:b,d:g}},{name:"d",path:"a",vueId:"1751d24c-0"}),b:e.t(c.value),c:e.o(f),d:e.p({collection:"uni-id-users",field:"nickname,avatar_file",getone:!0,where:`_id == '${u.value}'`}),e:e.t(s.value),f:e.o(m),g:e.t(a.value),h:e.o(B),i:e.o(h),j:e.o(p),k:e.o(v),l:e.p({tips:"\u8BF7\u9009\u62E9\u5C5E\u4E8E\u4F60\u7684\u4E13\u5C5E\u89D2\u8272",show:t.value,["item-list"]:_})})}});var C=e._export_sfc(w,[["__scopeId","data-v-1751d24c"],["__file","C:/Users/yzc/Desktop/pet/pages/Mine/PersonalInformation/index.vue"]]);wx.createComponent(C);
