"use strict";var e=require("../../../common/vendor.js");if(!Array){const m=e.resolveComponent("uni-dateformat"),u=e.resolveComponent("unicloud-db"),a=e.resolveComponent("uni-load-more");(m+u+a)()}const x=()=>"../../../uni_modules/uni-dateformat/components/uni-dateformat/uni-dateformat.js",$=()=>"../../../node-modules/@dcloudio/uni-components/lib/unicloud-db/unicloud-db.js",w=()=>"../../../uni_modules/uni-load-more/components/uni-load-more/uni-load-more.js";Math||(x+$+w)();const C=e.defineComponent({__name:"index",setup(m){const u=e.ref(null);e.onPullDownRefresh(()=>{u.value.loadData(()=>{e.index.stopPullDownRefresh()})}),e.onReachBottom(()=>{u.value.loadMore()});const a=e.pn.getCurrentUserInfo().uid,r=e.pn.database(),c=e.reactive([r.collection("collect").where("type==0||type==1||type==4").orderBy("create_time","desc").getTemp(),r.collection("adoption").where(`user_id=='${a}'`).field("_id,img").getTemp(),r.collection("foundPet").where(`user_id=='${a}'`).field("_id,uploadPicture").getTemp(),r.collection("topic").where(`user_id=='${a}'`).field("_id,image").getTemp()]),g=i=>{e.index.navigateTo({url:`/pages/ApplyAdopt/index?id=${i}`})},v=i=>{e.index.navigateTo({url:`/pages/Home/Enlightenment/index?id=${i}`})},y=i=>{e.index.navigateTo({url:`/pages/ApplyAdopt/UserInfo/index?userId=${i}`})};return(i,P)=>({a:e.w(({data:b,pagination:T,loading:t,error:p,hasMore:s},h,n)=>e.e({a:p},p?{b:e.t(p.message)}:{c:e.f(b,(o,k,_)=>e.e({a:o.adopt_id[0]||o.topic_id[0]||o.found_id[0]},o.adopt_id[0]||o.topic_id[0]||o.found_id[0]?e.e({b:e.w(({data:d},l,f)=>({a:d==null?void 0:d.avatar_file.url,b:e.t(d==null?void 0:d.nickname),c:"4959e430-2-"+n+"-"+_+"-"+f+","+("4959e430-1-"+n+"-"+_),d:f,e:l}),{name:"d",path:"a["+n+"]."+("c["+_+"].")+"b",vueId:"4959e430-1-"+n+"-"+_+",4959e430-0"}),c:e.o(d=>y(o.user_id)),d:e.p({date:o==null?void 0:o.create_time,format:"yyyy-MM-dd hh:mm:ss"}),e:e.t(o.topic_id[0]?"\u70B9\u8D5E":"\u6536\u85CF"),f:"4959e430-1-"+n+"-"+_+",4959e430-0",g:e.p({collection:"uni-id-users",where:`_id=='${o.user_id}'`,getone:!0,field:"nickname,avatar_file"}),h:o.adopt_id[0]},o.adopt_id[0]?{i:o.adopt_id[0].img[0].url,j:e.o(d=>g(o.adopt_id[0]._id))}:{},{k:o.found_id[0]},o.found_id[0]?{l:o.found_id[0].uploadPicture[0].url,m:e.o(d=>v(o.found_id[0]._id))}:{},{n:o.topic_id[0]},o.topic_id[0]?{o:o.topic_id[0].image[0].url,p:e.o(d=>i.goTopic(o.topic_id[0]._id))}:{}):{},{q:o._id}))},{d:t},t?{e:"4959e430-3-"+n+",4959e430-0",f:e.p({status:"loading"})}:{},{g:s&&!t},s&&!t?{h:"4959e430-4-"+n+",4959e430-0",i:e.p({status:"more"})}:!s&&!t?{k:"4959e430-5-"+n+",4959e430-0",l:e.p({status:"noMore"})}:{},{j:!s&&!t,m:n,n:h}),{name:"d",path:"a",vueId:"4959e430-0"}),b:e.sr(u,"4959e430-0",{k:"udb"}),c:e.p({collection:c,getone:!1,field:"adopt_id,found_id,_id,create_time,type,user_id,topic_id"})})}});var I=e._export_sfc(C,[["__scopeId","data-v-4959e430"],["__file","C:/Users/yzc/Desktop/pet/pages/Message/MyCollect/index.vue"]]);wx.createPage(I);
