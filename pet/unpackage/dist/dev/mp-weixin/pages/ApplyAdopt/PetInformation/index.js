"use strict";var e=require("../../../common/vendor.js");if(!Array){const c=e.resolveComponent("uni-icons"),p=e.resolveComponent("tui-icon"),n=e.resolveComponent("uni-dateformat"),u=e.resolveComponent("uni-popup-dialog"),s=e.resolveComponent("uni-popup");(c+p+n+u+s)()}const f=()=>"../../../uni_modules/uni-icons/components/uni-icons/uni-icons.js",v=()=>"../../../node-modules/thorui-uni/lib/thorui/tui-icon/tui-icon.js",y=()=>"../../../uni_modules/uni-dateformat/components/uni-dateformat/uni-dateformat.js",g=()=>"../../../uni_modules/uni-popup/components/uni-popup-dialog/uni-popup-dialog.js",h=()=>"../../../uni_modules/uni-popup/components/uni-popup/uni-popup.js";Math||(f+v+y+C+g+h)();const C=()=>"../Poster/index.js",x=e.defineComponent({__name:"index",props:{petInfo:{type:Object,required:!0}},setup(c){var l;const p=c,n=e.getCurrentInstance(),u=e.reactive({uid:""}),s=e.ref(null),t=e.ref(),_=()=>{s.value.open("center")};(l=n==null?void 0:n.proxy)==null||l.$Bus.on("ifCollect2",i=>{t.value=i});const{petInfo:o}=e.toRefs(p);e.watch(()=>o.value._id,()=>{r.collection("collect").where(`user_id=='${u.uid}'&&adopt_id=='${o.value._id}'`).get().then(i=>{var a;(a=i.result.data[0])!=null&&a._id?t.value=!0:t.value=!1})}),e.onShow(()=>{Object.assign(u,e.pn.getCurrentUserInfo())}),e.onLoad(()=>{Object.assign(u,e.pn.getCurrentUserInfo())});const r=e.pn.database(),m=()=>{var i;u.uid?((i=n==null?void 0:n.proxy)==null||i.$Bus.emit("ifCollect",!t.value),t.value?r.collection("collect").where(`user_id=='${u.uid}'&&adopt_id=='${o.value._id}'`).remove().then(()=>{t.value=!1,e.index.showToast({title:"\u53D6\u6D88\u6536\u85CF",icon:"none"})}):e.pn.callFunction({name:"collect",data:{userId:u.uid,adoptId:o.value._id,type:0}}).then(()=>{t.value=!0,e.index.showToast({title:"\u6536\u85CF\u6210\u529F",icon:"none"})})):e.index.navigateTo({url:"/uni_modules/uni-id-pages/pages/login/login-withoutpwd?type=weixin"})};return(i,a)=>({a:e.t(e.unref(o).pet_name),b:e.t(e.unref(o).gender=="\u7537\u751F"?"\u2642":"\u2640"),c:e.p({type:"star",size:"30",color:t.value?"#d78797":"#ccc"}),d:e.o(m),e:e.t(e.unref(o).pet_name),f:e.t(e.unref(o).age),g:e.t(e.unref(o).variety),h:e.t(e.unref(o).gender),i:e.t(e.unref(o).city[1]),j:e.t(e.unref(o).city[2]),k:e.t(e.unref(o).punch?e.unref(o).punch:"\u672A\u8BBE\u7F6E"),l:e.o(_),m:e.p({name:"about-fill",size:15,color:"#d78797"}),n:e.t(e.unref(o).story),o:e.f(e.unref(o).request,(d,j,F)=>({a:e.t(d),b:d})),p:e.p({name:"clock",size:15}),q:e.p({date:e.unref(o).issue_time,format:"yyyy-MM-dd hh:mm:ss"}),r:e.p({petInfo:e.unref(o)}),s:e.p({type:"info",cancelText:"\u53D6\u6D88",confirmText:"\u786E\u8BA4",title:"\u9886\u517B\u6253\u5361\u987B\u77E5",content:"\u5E73\u53F0\u6D41\u7A0B\u9886\u517B\u6210\u529F\u540E,\u5373\u53EF\u6253\u5361,\u6BCF\u5468\u81F3\u5C11\u4E00\u6B21,\u53CD\u9988\u5BA0\u7269\u52A8\u6001"}),t:e.sr(s,"911e2c18-5",{k:"alertDialog"}),v:e.p({type:"dialog"})})}});var B=e._export_sfc(x,[["__scopeId","data-v-911e2c18"],["__file","C:/Users/yzc/Desktop/pet/pages/ApplyAdopt/PetInformation/index.vue"]]);wx.createComponent(B);
