"use strict";var e=require("../../../common/vendor.js"),s=require("../../../uni_modules/sakura-canvas/js_sdk/index.js");require("../../../uni_modules/sakura-canvas/js_sdk/methods/text.js"),require("../../../uni_modules/sakura-canvas/js_sdk/utils/util.js"),require("../../../uni_modules/sakura-canvas/js_sdk/plugins/image-tools.js"),require("../../../uni_modules/sakura-canvas/js_sdk/methods/line.js"),require("../../../uni_modules/sakura-canvas/js_sdk/methods/rect.js"),require("../../../uni_modules/sakura-canvas/js_sdk/methods/arc.js"),require("../../../uni_modules/sakura-canvas/js_sdk/methods/image.js"),require("../../../uni_modules/sakura-canvas/js_sdk/methods/triangle.js"),require("../../../uni_modules/sakura-canvas/js_sdk/methods/qrcode.js"),require("../../../uni_modules/sakura-canvas/js_sdk/plugins/qrcodeAlg.js"),require("../../../uni_modules/sakura-canvas/js_sdk/methods/canvas.js"),require("../../../uni_modules/sakura-canvas/js_sdk/utils/common.js"),Math||t();const t=()=>"../../../components/u-show-poster/u-show-poster.js",a=e.defineComponent({__name:"index",props:{petInfo:null},setup(t){const a=t,{petInfo:r}=e.toRefs(a),{ctx:u}=e.getCurrentInstance(),i="poster",n=e.reactive({width:"600rpx",height:"1000rpx"}),o=e.ref(!1),c=e.ref("");let d=null;const m=e.reactive({image:"",petImg:"",petName:"",petAge:"",city:"",story:""});setTimeout((()=>{const s=e.reactive({image:"/static/images/海报.png",petImg:r.value.img[0].url,petName:"我叫"+r.value.pet_name,petAge:"我今年"+r.value.age+"了",city:"我在"+r.value.city[0]+r.value.city[1]+r.value.city[2],story:r.value.story});Object.assign(m,s)}),1e3);const l=async()=>{const{image:e,petImg:s,petName:t,petAge:a,city:r,story:u}=m,i=await d.drawPoster((({ctxObj:i,bgObj:n})=>{const{width:o,height:c}=i;return[{name:"background",type:"rect",w:o,h:c,color:"#ffffff",shadow:{show:!1,blur:30,color:"rgba(0, 0, 0, .15)"}},{unit:"rpx",type:"image",drawType:"rect",src:e,h:1e3,w:600},{unit:"rpx",type:"image",drawType:"rect",src:s,windowAlign:"center",y:155,h:315,w:370},{type:"text",text:t,y:550,x:50,font:{size:25,weight:900}},{type:"text",text:a,y:550,x:350,font:{size:25,weight:900}},{type:"text",text:r,y:600,x:50,font:{size:25,weight:900}},{type:"text",text:u,y:650,x:35,w:560,font:{size:25,weight:900},LineHeight:{height:35}}]}));i.success&&(o.value=!0,c.value=i.data)};return e.onMounted((()=>{d=new s.DrawPoster({width:600,height:1e3,canvasId:i,_this:u,unit:"rpx",type:"default",background:{type:"color",color:"#fff"},drawDelayTime:200,exportImageDelayTime:600}),d.$on("init",(async()=>{await d.drawBackground()}))})),(s,t)=>({a:e.o(l),b:i,c:i,d:e.s(n),e:e.o((e=>o.value=e)),f:e.p({image:c.value,modelValue:o.value})})}});var r=e._export_sfc(a,[["__scopeId","data-v-369f6678"]]);wx.createComponent(r);
