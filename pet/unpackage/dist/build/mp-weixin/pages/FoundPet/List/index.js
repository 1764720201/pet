"use strict";var e=require("../../../common/vendor.js");if(!Array){(e.resolveComponent("tui-icon")+e.resolveComponent("uni-dateformat")+e.resolveComponent("uni-load-more")+e.resolveComponent("unicloud-db"))()}Math||(a+(()=>"../../../node-modules/thorui-uni/lib/thorui/tui-icon/tui-icon.js")+(()=>"../../../uni_modules/uni-dateformat/components/uni-dateformat/uni-dateformat.js")+(()=>"../../../uni_modules/uni-load-more/components/uni-load-more/uni-load-more.js")+(()=>"../../../node-modules/@dcloudio/uni-components/lib/unicloud-db/unicloud-db.js"))();const a=()=>"../../../components/pick-regions/pick-regions.js",t=e.defineComponent({__name:"index",setup(a){var t;const o=e.ref([]),l=e.ref(["全部","喵星人","汪星人","其它"]),n=e.ref(["全部","男生","女生"]),u=e.ref(["全部","近一周","近一个月","近三个月"]),i=Date.now(),r=e.ref("星球"),d=e.ref("性别"),c=e.ref("地区"),s=e.ref("时间"),v=e=>{r.value=l.value[e.detail.value],"全部"!=l.value[e.detail.value]?o.value[0]=`star=='${l.value[e.detail.value]}'`:o.value[0]=""},m=e=>{d.value=n.value[e.detail.value],"全部"!=n.value[e.detail.value]?o.value[1]=`gender=='${n.value[e.detail.value]}'`:o.value[1]=""},f=i-604800,p=i-2678400,_=i-8035200,g=e=>{switch(s.value=u.value[e.detail.value],u.value[e.detail.value]){case"全部":o.value[3]="";break;case"近一周":o.value[3]=`create_time<=${f}`;break;case"近一个月":o.value[3]=`create_time<=${p}&&create_time>${f}`;break;case"近三个月":o.value[3]=`create_time<=${_}&&create_time>${p}`}},h=e=>{c.value=e[2].name,o.value[2]=`city=='${e[2].name}'`},y=e.getCurrentInstance();null==(t=null==y?void 0:y.proxy)||t.$Bus.on("found-search",(e=>{o.value[0]=`variety=='${e}'||star=='${e}'||type=='${e}'||city=='${e}'||gender=='${e}'`}));const $=e.ref(null);return e.onPullDownRefresh((()=>{$.value.loadData((()=>{e.index.stopPullDownRefresh()}))})),e.onReachBottom((()=>{$.value.loadMore()})),(a,t)=>({a:e.t(r.value),b:e.o(v),c:l.value,d:e.t(d.value),e:e.o(m),f:n.value,g:e.t(c.value),h:e.o(h),i:e.t(s.value),j:e.o(g),k:u.value,l:e.w((({data:a,pagination:t,loading:o,error:l,hasMore:n},u,i)=>e.e({a:l},l?{b:e.t(l.message)}:{c:e.f(a,((a,t,o)=>e.e({a:a.uploadPicture[0].path,b:a.reward},a.reward?{c:e.t("酬金"+a.reward+"元")}:{},{d:e.t(a.type),e:e.t(a.title),f:e.t(a.variety),g:e.t(a.gender),h:"7354f9c4-2-"+i+"-"+o+",7354f9c4-1",i:e.t(a.city[1]),j:e.t(a.city[2]),k:"7354f9c4-3-"+i+"-"+o+",7354f9c4-1",l:e.p({date:a.create_time,format:"yyyy-MM-dd hh:mm:ss"}),m:a._id,n:e.o((t=>{return o=a._id,void e.index.navigateTo({url:`/pages/Home/Enlightenment/index?id=${o}`});var o}),a._id)}))),d:e.p({name:"position",size:24})},{e:o},o?{f:"7354f9c4-4-"+i+",7354f9c4-1",g:e.p({status:"loading"})}:{},{h:n&&!o},n&&!o?{i:"7354f9c4-5-"+i+",7354f9c4-1",j:e.p({status:"more"})}:n||o?{}:{l:"7354f9c4-6-"+i+",7354f9c4-1",m:e.p({status:"noMore"})},{k:!n&&!o,n:i,o:u})),{name:"d",path:"l",vueId:"7354f9c4-1"}),m:e.sr($,"7354f9c4-1",{k:"udb"}),n:e.p({collection:"foundPet",orderby:"create_time desc",field:"reward,create_time,city,title,gender,uploadPicture,_id,type,variety",getone:!1,where:o.value.filter((e=>e)).join("&&"),"page-size":4})})}});var o=e._export_sfc(t,[["__scopeId","data-v-7354f9c4"]]);wx.createComponent(o);
