"use strict";var e=require("../../../common/vendor.js");const o=e.defineComponent({__name:"index",setup(o){const t=e.pn.getCurrentUserInfo().uid,n=e.pn.database(),c=e.ref(0),i=e.ref(0),d=()=>{e.index.navigateTo({url:"./MyComment/index"})},l=()=>{e.index.navigateTo({url:"./MyCollect/index"})},a=(e,o)=>{i.value=0,c.value=0;const d=o,l=n.collection("adoption").where(`user_id=='${t}'`).field("adopt_id,topic_id,found_id,_id").getTemp(),a=n.collection("foundPet").where(`user_id=='${t}'`).getTemp(),s=n.collection("topic").where(`user_id=='${t}'`).getTemp();n.collection(e,l,a,s).field("size(adopt_id) as adopt,size(topic_id) as topic,size(found_id) as found").groupBy("num").groupField("sum(adopt) as sumAdopt,sum(found) as sumFound,sum(topic) as sumTopic").get({getOne:!0}).then((e=>{const o=Object.values(e.result.data);if("collect"==d)for(let t=1;t<4;t++)i.value+=o[t];else if("comment"==d)for(let t=1;t<4;t++)c.value+=o[t]}))};return e.onShow((async()=>{const e=n.collection("comment").getTemp(),o=n.collection("collect").getTemp();a(e,"comment"),a(o,"collect")})),(o,t)=>({a:e.t(i.value),b:e.o(l),c:e.t(c.value),d:e.o(d)})}});var t=e._export_sfc(o,[["__scopeId","data-v-25cebf5e"]]);wx.createComponent(t);
