"use strict";var e=require("../../../common/vendor.js");if(!Array){(e.resolveComponent("uni-dateformat")+e.resolveComponent("unicloud-db")+e.resolveComponent("uni-load-more"))()}Math||((()=>"../../../uni_modules/uni-dateformat/components/uni-dateformat/uni-dateformat.js")+(()=>"../../../node-modules/@dcloudio/uni-components/lib/unicloud-db/unicloud-db.js")+(()=>"../../../uni_modules/uni-load-more/components/uni-load-more/uni-load-more.js"))();const d=e.defineComponent({__name:"index",setup(d){const o=e.ref(null);e.onPullDownRefresh((()=>{o.value.loadData((()=>{e.index.stopPullDownRefresh()}))})),e.onReachBottom((()=>{o.value.loadMore()}));const i=e.pn.getCurrentUserInfo().uid,a=e.pn.database(),t=e.reactive([a.collection("collect").where("type==0||type==1||type==4").orderBy("create_time","desc").getTemp(),a.collection("adoption").where(`user_id=='${i}'`).field("_id,img").getTemp(),a.collection("foundPet").where(`user_id=='${i}'`).field("_id,uploadPicture").getTemp(),a.collection("topic").where(`user_id=='${i}'`).field("_id,image").getTemp()]);return(d,i)=>({a:e.w((({data:o,pagination:i,loading:a,error:t,hasMore:n},r,u)=>e.e({a:t},t?{b:e.t(t.message)}:{c:e.f(o,((o,i,a)=>e.e({a:o.adopt_id[0]||o.topic_id[0]||o.found_id[0]},o.adopt_id[0]||o.topic_id[0]||o.found_id[0]?e.e({b:e.w((({data:d},o,i)=>({a:null==d?void 0:d.avatar_file.url,b:e.t(null==d?void 0:d.nickname),c:"ed1d2b2a-2-"+u+"-"+a+"-"+i+",ed1d2b2a-1-"+u+"-"+a,d:i,e:o})),{name:"d",path:"a["+u+"].c["+a+"].b",vueId:"ed1d2b2a-1-"+u+"-"+a+",ed1d2b2a-0"}),c:e.o((d=>{return i=o.user_id,void e.index.navigateTo({url:`/pages/ApplyAdopt/UserInfo/index?userId=${i}`});var i})),d:e.p({date:null==o?void 0:o.create_time,format:"yyyy-MM-dd hh:mm:ss"}),e:e.t(o.topic_id[0]?"点赞":"收藏"),f:"ed1d2b2a-1-"+u+"-"+a+",ed1d2b2a-0",g:e.p({collection:"uni-id-users",where:`_id=='${o.user_id}'`,getone:!0,field:"nickname,avatar_file"}),h:o.adopt_id[0]},o.adopt_id[0]?{i:o.adopt_id[0].img[0].url,j:e.o((d=>{return i=o.adopt_id[0]._id,void e.index.navigateTo({url:`/pages/ApplyAdopt/index?id=${i}`});var i}))}:{},{k:o.found_id[0]},o.found_id[0]?{l:o.found_id[0].uploadPicture[0].url,m:e.o((d=>{return i=o.found_id[0]._id,void e.index.navigateTo({url:`/pages/Home/Enlightenment/index?id=${i}`});var i}))}:{},{n:o.topic_id[0]},o.topic_id[0]?{o:o.topic_id[0].image[0].url,p:e.o((e=>d.goTopic(o.topic_id[0]._id)))}:{}):{},{q:o._id})))},{d:a},a?{e:"ed1d2b2a-3-"+u+",ed1d2b2a-0",f:e.p({status:"loading"})}:{},{g:n&&!a},n&&!a?{h:"ed1d2b2a-4-"+u+",ed1d2b2a-0",i:e.p({status:"more"})}:n||a?{}:{k:"ed1d2b2a-5-"+u+",ed1d2b2a-0",l:e.p({status:"noMore"})},{j:!n&&!a,m:u,n:r})),{name:"d",path:"a",vueId:"ed1d2b2a-0"}),b:e.sr(o,"ed1d2b2a-0",{k:"udb"}),c:e.p({collection:t,getone:!1,field:"adopt_id,found_id,_id,create_time,type,user_id,topic_id"})})}});var o=e._export_sfc(d,[["__scopeId","data-v-ed1d2b2a"]]);wx.createPage(o);
