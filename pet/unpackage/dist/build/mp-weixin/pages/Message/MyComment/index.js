"use strict";var e=require("../../../common/vendor.js");if(!Array){(e.resolveComponent("uni-dateformat")+e.resolveComponent("uni-load-more")+e.resolveComponent("unicloud-db"))()}Math||((()=>"../../../uni_modules/uni-dateformat/components/uni-dateformat/uni-dateformat.js")+(()=>"../../../uni_modules/uni-load-more/components/uni-load-more/uni-load-more.js")+(()=>"../../../node-modules/@dcloudio/uni-components/lib/unicloud-db/unicloud-db.js"))();const d=e.defineComponent({__name:"index",setup(d){const o=e.pn.database(),i=e.pn.getCurrentUserInfo().uid,t=e.ref(null);e.onPullDownRefresh((()=>{t.value.loadData((()=>{e.index.stopPullDownRefresh()}))})),e.onReachBottom((()=>{t.value.loadMore()}));const n=e.reactive([o.collection("comment").field("found_id,adopt_id,comment,nickname,avatar_url,create_time,user_id,topic_id").orderBy("create_time","desc").getTemp(),o.collection("adoption").where(`user_id=='${i}'`).field("_id,img").getTemp(),o.collection("foundPet").where(`user_id=='${i}'`).field("_id,uploadPicture").getTemp(),o.collection("topic").where(`user_id=='${i}'`).field("_id,image").getTemp()]);return(d,o)=>({a:e.w((({data:d,pagination:o,loading:i,error:t,hasMore:n},a,r)=>e.e({a:t},t?{b:e.t(t.message)}:{c:e.f(d,((d,o,i)=>e.e({a:d.adopt_id[0]||d.found_id[0]||d.topic_id[0]},d.adopt_id[0]||d.found_id[0]||d.topic_id[0]?e.e({b:null==d?void 0:d.avatar_url,c:e.o((o=>{return i=null==d?void 0:d.user_id,void e.index.navigateTo({url:`/pages/ApplyAdopt/UserInfo/index?userId=${i}`});var i})),d:e.t(null==d?void 0:d.nickname),e:"0d95502e-1-"+r+"-"+i+",0d95502e-0",f:e.p({date:null==d?void 0:d.create_time,format:"yyyy-MM-dd hh:mm:ss"}),g:d.adopt_id[0]},d.adopt_id[0]?{h:d.adopt_id[0].img[0].url,i:e.o((o=>{return i=d.adopt_id[0]._id,void e.index.navigateTo({url:`/pages/ApplyAdopt/index?id=${i}`});var i}))}:{},{j:d.found_id[0]},d.found_id[0]?{k:d.found_id[0].uploadPicture[0].url,l:e.o((o=>{return i=d.found_id[0]._id,void e.index.navigateTo({url:`/pages/Home/Enlightenment/index?id=${i}`});var i}))}:{},{m:d.topic_id[0]},d.topic_id[0]?{n:d.topic_id[0].image[0].url,o:e.o((o=>{return i=d.topic_id[0]._id,void e.index.navigateTo({url:`/pages/Home/Daily/CatDaily/TopicDetail/index?id=${i}`});var i}))}:{},{p:e.t(null==d?void 0:d.comment)}):{},{q:d._id})))},{d:i},i?{e:"0d95502e-2-"+r+",0d95502e-0",f:e.p({status:"loading"})}:{},{g:n&&!i},n&&!i?{h:"0d95502e-3-"+r+",0d95502e-0",i:e.p({status:"more"})}:n||i?{}:{k:"0d95502e-4-"+r+",0d95502e-0",l:e.p({status:"noMore"})},{j:!n&&!i,m:r,n:a})),{name:"d",path:"a",vueId:"0d95502e-0"}),b:e.sr(t,"0d95502e-0",{k:"udb"}),c:e.p({collection:n,getone:!1,"page-size":10,field:"adopt_id,found_id,_id,avatar_url,user_id,nickname,create_time,comment,topic_id"})})}});var o=e._export_sfc(d,[["__scopeId","data-v-0d95502e"]]);wx.createPage(o);
