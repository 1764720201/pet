"use strict";var e=require("../../../../common/vendor.js");if(!Array){(e.resolveComponent("uni-forms-item")+e.resolveComponent("uni-file-picker")+e.resolveComponent("uni-forms"))()}Math||((()=>"../../../../uni_modules/uni-forms/components/uni-forms-item/uni-forms-item.js")+(()=>"../../../../uni_modules/uni-file-picker/components/uni-file-picker/uni-file-picker.js")+(()=>"../../../../uni_modules/uni-forms/components/uni-forms/uni-forms.js"))();const n=e.defineComponent({__name:"index",setup(n){const i=e.reactive({content:"",imageList:[]}),o=e.pn.getCurrentUserInfo().uid,t=e.ref(null),r=e.reactive({content:{rules:[{required:!0,errorMessage:"内容不能为空"},{maxLength:200,errorMessage:"最大长度为200"}]},imageList:{rules:[{required:!0,errMessage:"图片不能为空"}]}}),s=()=>{t.value.validate().then((()=>{e.pn.callFunction({name:"topic",data:{imageList:i.imageList,userId:o,content:i.content,read:0},success(){e.index.showToast({title:"发布成功"}),e.index.navigateBack()},fail(e){console.log(e)}})}))};return(n,o)=>({a:i.content,b:e.o((e=>i.content=e.detail.value)),c:e.p({name:"content"}),d:e.o((e=>i.imageList=e)),e:e.p({"file-mediatype":"image",mode:"grid",limit:6,modelValue:i.imageList}),f:e.p({name:"imageList"}),g:e.sr(t,"5d36c198-0",{k:"form"}),h:e.p({modelValue:i,rules:r}),i:e.o(s)})}});var i=e._export_sfc(n,[["__scopeId","data-v-5d36c198"]]);wx.createPage(i);
