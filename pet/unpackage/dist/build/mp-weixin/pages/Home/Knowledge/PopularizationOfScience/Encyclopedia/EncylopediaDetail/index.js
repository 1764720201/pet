"use strict";var e=require("../../../../../../common/vendor.js");if(!Array){(e.resolveComponent("uni-icons")+e.resolveComponent("lgd-tab"))()}Math||((()=>"../../../../../../uni_modules/uni-icons/components/uni-icons/uni-icons.js")+(()=>"../../../../../../uni_modules/lgd-tab/components/lgd-tab/lgd-tab.js")+a)();const a=()=>"../../../../../../components/Tab/Encyclopedia/PetDetail.js",t=e.defineComponent({__name:"index",setup(a){const t=["描述","特点","性格特征","核心信息","喂养要点"],c=e.ref(0),n=e.ref(""),o=e=>{switch(e){case 0:n.value="desc";break;case 1:n.value="feature";break;case 2:n.value="characterFeature";break;case 3:n.value="careKnowledge";break;case 4:n.value="feedPoints"}},r=e.reactive({_id:"",pettype:null,name:"",engName:"",characters:"",nation:"",easyOfDisease:"",life:"",price:"",desc:"",feature:"",characterFeature:"",careKnowledge:"",feedPoints:"",url:"",coverURL:""}),i=e.pn.database(),s=e.pn.getCurrentUserInfo().uid,l=e.ref(),d=()=>{l.value?(i.collection("collect").where(`user_id=='${s}'&&pet_id=='${r._id}'`).remove(),u()):e.pn.callFunction({name:"collect",data:{type:3,petId:r._id,userId:s}}).then((()=>{u(),e.index.showToast({title:"收藏成功"})}))},u=()=>{i.collection("collect").where(`user_id=='${s}'&&pet_id=='${r._id}'`).get().then((e=>{e.result.data[0]?l.value=!0:l.value=!1}))};return e.watch((()=>r._id),(e=>{r._id=e,u()})),e.onLoad((e=>{i.collection("pet").where(`_id=='${e.petId}'`).get().then((e=>{Object.assign(r,e.result.data[0])}))})),(a,i)=>({a:r.coverURL,b:e.t(r.name),c:e.p({type:"star",size:"15",color:l.value?"red":"#ccc"}),d:e.o(d),e:e.t(r.engName),f:e.t(r.characters),g:e.t(r.nation),h:e.t(r.easyOfDisease),i:e.t(r.price),j:e.t(r.life),k:e.o(o),l:e.p({tabValue:t,tabIndex:c.value,textColor:"#ec8a9e ",underlineColor:"#ec8a9e"}),m:e.p({petId:r._id,field:n.value})})}});var c=e._export_sfc(t,[["__scopeId","data-v-41f2ec8c"]]);wx.createPage(c);
