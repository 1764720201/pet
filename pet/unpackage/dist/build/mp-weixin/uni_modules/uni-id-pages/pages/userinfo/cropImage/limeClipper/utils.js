"use strict";var e=require("../../../../../../common/vendor.js");exports.calcImageOffset=function(e,t){let i=e.imageLeft,c=e.imageTop;t=t||e.scale;let h=e.imageWidth,r=e.imageHeight;e.angle/90%2&&(h=e.imageHeight,r=e.imageWidth);const{clipX:a,clipWidth:l,clipY:n,clipHeight:o}=e,g=e=>e*t/2,p=g(h),s=g(r);return i=a+p>=i?i:a+p,i=a+l-p<=i?i:a+l-p,c=n+s>=c?c:n+s,c=n+o-s<=c?c:n+o-s,{left:i,top:c,scale:t}},exports.calcImageScale=function(e,t){t=t||e.scale;let{imageWidth:i,imageHeight:c,clipWidth:h,clipHeight:r,angle:a}=e;return a/90%2&&(i=c,c=i),i*t<h&&(t=h/i),c*t<r&&(t=Math.max(t,r/c)),t},exports.calcImageSize=function(t,i,c){let h=t,r=i,{clipWidth:a,clipHeight:l,sysinfo:n,width:o,height:g}=c;if(h&&r)h/r>(a||o)/(a||g)?(r=l||g,h=t/i*r):(h=a||o,r=i/t*h);else{h=(n||e.index.getSystemInfoSync()).windowWidth,r=0}return{imageWidth:h,imageHeight:r}},exports.calcPythagoreanTheorem=function(e,t){return Math.sqrt(Math.pow(e,2)+Math.pow(t,2))},exports.clipTouchMoveOfCalculate=function(e,t){const i=t.touches[0].clientX,c=t.touches[0].clientY;let{clipWidth:h,clipHeight:r,clipY:a,clipX:l,clipStart:n,isLockRatio:o,maxWidth:g,minWidth:p,maxHeight:s,minHeight:u}=e;g/=2,p/=2,u/=2,s/=2;let m=h,d=r,f=a,x=l,w=()=>(m=m<=g?m>=p?m:p:g,d=d<=s?d>=u?d:u:s,!(m>g||m<p||d>s||d<u)||!o);switch(d=n.height+(n.corner>1&&n.corner<4?1:-1)*(n.y-c),n.corner){case 1:if(m=n.width-n.x+i,o&&(d=m/(h/r)),!w())return;break;case 2:if(m=n.width-n.x+i,o&&(d=m/(h/r)),!w())return;f=n.clipY-(d-n.height);break;case 3:if(m=n.width+n.x-i,o&&(d=m/(h/r)),!w())return;f=n.clipY-(d-n.height),x=n.clipX-(m-n.width);break;case 4:if(m=n.width+n.x-i,o&&(d=m/(h/r)),!w())return;x=n.clipX-(m-n.width)}return{width:m,height:d,clipX:x,clipY:f}},exports.determineDirection=function(e,t,i,c,h,r){let a;const l=[e+i/2,t+c/2],n=[h,r];return n[0]<=l[0]&&n[1]<=l[1]?a=3:n[0]>=l[0]&&n[1]<=l[1]?a=2:n[0]<=l[0]&&n[1]>=l[1]?a=4:n[0]>=l[0]&&n[1]>=l[1]&&(a=1),a},exports.imageTouchMoveOfCalcOffset=function(e,t,i){return{left:t-e.touchRelative[0].x,top:i-e.touchRelative[0].y}};
