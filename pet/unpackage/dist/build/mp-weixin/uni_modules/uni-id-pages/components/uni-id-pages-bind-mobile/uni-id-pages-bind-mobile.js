"use strict";var e=require("../../../../common/vendor.js");e.pn.database().collection("uni-id-users");const o=e.pn.importObject("uni-id-co"),s={emits:["success"],computed:{},data:()=>({}),methods:{beforeGetphonenumber:async()=>await new Promise(((o,s)=>{e.index.showLoading({mask:!0}),wx.checkSession({success(){console.log("session_key 未过期"),o(),e.index.hideLoading()},fail(){console.log("session_key 已经失效，正在执行更新"),wx.login({success({code:i}){e.pn.importObject("uni-id-co",{customUI:!0}).loginByWeixin({code:i}).then((e=>{console.log(e),o()})).catch((e=>{console.log(e),s()})).finally((o=>{console.log(o),e.index.hideLoading()}))},fail:e=>{console.error(e),s()}})}})})),async bindMobileByMpWeixin(e){console.log(e),"getPhoneNumber:ok"==e.detail.errMsg?(console.log(e.detail),await this.beforeGetphonenumber(),o.bindMobileByMpWeixin(e.detail).then((e=>{console.log(e),this.$emit("success")})).finally((e=>{this.closeMe()}))):this.closeMe()},async open(){this.$refs.popup.open()},closeMe(e){this.$refs.popup.close()}}};if(!Array){e.resolveComponent("uni-popup")()}Math;var i=e._export_sfc(s,[["render",function(o,s,i,n,c,t){return{a:e.o(((...e)=>t.closeMe&&t.closeMe(...e))),b:e.o(((...e)=>t.bindMobileByMpWeixin&&t.bindMobileByMpWeixin(...e))),c:e.sr("popup","017dbd2e-0"),d:e.p({type:"bottom"})}}],["__scopeId","data-v-017dbd2e"]]);wx.createComponent(i);
