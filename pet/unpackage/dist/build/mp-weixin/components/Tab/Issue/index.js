"use strict";var e=require("../../../common/vendor.js");if(!Array){(e.resolveComponent("unicloud-db")+e.resolveComponent("uni-icons")+e.resolveComponent("uni-load-more")+e.resolveComponent("tui-actionsheet"))()}Math||((()=>"../../../node-modules/@dcloudio/uni-components/lib/unicloud-db/unicloud-db.js")+(()=>"../../../uni_modules/uni-icons/components/uni-icons/uni-icons.js")+(()=>"../../../uni_modules/uni-load-more/components/uni-load-more/uni-load-more.js")+(()=>"../../../node-modules/thorui-uni/lib/thorui/tui-actionsheet/tui-actionsheet.js"))();const o=e.defineComponent({__name:"index",props:{where:null},setup(o){const n=o,{where:t}=e.toRefs(n),a=e.ref(null),d=e.ref(!1),i=()=>{d.value=!1},s=e.ref(),u=e.reactive([{text:"放弃",color:"#2B2B2B"},{text:"已被领养",color:"#2B2B2B"},{text:"去分享",color:"#ea7587"}]),c=o=>{switch(o.index){case 0:a.value.remove(s.value,{confirmContent:"你确定要取消发布领养吗"});break;case 1:a.value.update(s.value,{if_adopt:!0},{toastTitle:"已成功送养",success(){a.value.refresh(),d.value=!1}});break;case 2:e.index.navigateTo({url:`/pages/ApplyAdopt/index?id=${s.value}`})}};return e.onPullDownRefresh((()=>{a.value.loadData((()=>{e.index.stopPullDownRefresh()}))})),e.onReachBottom((()=>{a.value.loadMore()})),(o,n)=>({a:e.w((({data:o,pagination:n,loading:t,error:a,hasMore:i},u,c)=>e.e({a:a},a?{b:e.t(a.message)}:e.e({c:e.f(o,((o,n,t)=>({a:o.img[0].path,b:e.t(o.pet_name),c:e.w((({data:o},n,t)=>({a:e.t(o.length),b:t,c:n})),{name:"d",path:"a["+c+"].c["+t+"].c",vueId:"243d1bcf-1-"+c+"-"+t+",243d1bcf-0"}),d:"243d1bcf-1-"+c+"-"+t+",243d1bcf-0",e:e.p({where:`adopt_id=='${o._id}'`,collection:"comment"}),f:e.f(o.medical,((o,n,t)=>({a:e.t(o)}))),g:e.o((n=>{return t=o._id,void e.index.navigateTo({url:`/pages/Issue/Adoption/index?id=${t}`});var t})),h:e.o((e=>{return n=o._id,s.value=n,void(d.value=!0);var n})),i:"243d1bcf-2-"+c+"-"+t+",243d1bcf-0",j:o._id}))),d:e.p({type:"more-filled",size:"30",color:"#b4b4b4"}),e:t},t?{f:"243d1bcf-3-"+c+",243d1bcf-0",g:e.p({status:"loading"})}:{},{h:i&&!t},i&&!t?{i:"243d1bcf-4-"+c+",243d1bcf-0",j:e.p({status:"more"})}:i||t?{}:{l:"243d1bcf-5-"+c+",243d1bcf-0",m:e.p({status:"noMore"})},{k:!i&&!t}),{n:c,o:u})),{name:"d",path:"a",vueId:"243d1bcf-0"}),b:e.sr(a,"243d1bcf-0",{k:"udb"}),c:e.p({collection:"adoption",orderby:"issue_time desc",getone:!1,field:"_id,pet_name,img,if_adopt,medical",where:e.unref(t),"page-size":5}),d:e.o(i),e:e.o(c),f:e.p({show:d.value,"item-list":u})})}});var n=e._export_sfc(o,[["__scopeId","data-v-243d1bcf"]]);wx.createComponent(n);
