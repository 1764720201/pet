"use strict";var e=require("../../../common/vendor.js");if(!Array){(e.resolveComponent("unicloud-db")+e.resolveComponent("uni-load-more")+e.resolveComponent("uni-popup-dialog")+e.resolveComponent("uni-popup"))()}Math||((()=>"../../../node-modules/@dcloudio/uni-components/lib/unicloud-db/unicloud-db.js")+(()=>"../../../uni_modules/uni-load-more/components/uni-load-more/uni-load-more.js")+(()=>"../../../uni_modules/uni-popup/components/uni-popup-dialog/uni-popup-dialog.js")+(()=>"../../../uni_modules/uni-popup/components/uni-popup/uni-popup.js"))();const o=e.defineComponent({__name:"index",props:{where:null},setup(o){const n=o,{where:a}=e.toRefs(n),t=e.pn.database(),i=e.ref(null);e.onPullDownRefresh((()=>{i.value.loadData((()=>{e.index.stopPullDownRefresh()}))})),e.onReachBottom((()=>{i.value.loadMore()}));const p=e.ref(null),d=e.ref();e.ref([]);const l=async()=>{await t.collection("apply").where(`_id=='${d.value}'`).update({state:"已取消"}).then((()=>{i.value.refresh(),e.index.showToast({title:"成功取消该申请",icon:"none"})}))};return(o,n)=>({a:e.w((({data:o,pagination:n,loading:a,error:t,options:i,hasMore:l},u,r)=>e.e({a:t},t?{b:e.t(t.message)}:{c:e.f(o,((o,n,t)=>e.e({a:e.w((({data:n,loading:a,error:t,options:i},l,u)=>e.e({a:t},t?{b:e.t(t.message)}:{c:null==n?void 0:n.img[0].url,d:e.t(null==n?void 0:n.pet_name),e:e.t(null==n?void 0:n.variety),f:e.o((o=>{return a=null==n?void 0:n._id,void e.index.navigateTo({url:`/pages/ApplyAdopt/Apply/index?adoptId=${a}`});var a})),g:e.o((n=>{return a=o._id,void e.index.navigateTo({url:`/pages/Mine/Request/Apply/ApplyDetail/index?inApplyId=${a}`});var a})),h:e.o((e=>{return n=o._id,d.value=n,void p.value.open("center");var n}))},{i:u,j:l})),{name:"d",path:"a["+r+"].c["+t+"].a",vueId:"1094e566-1-"+r+"-"+t+",1094e566-0"}),b:"1094e566-1-"+r+"-"+t+",1094e566-0",c:e.p({collection:"adoption",field:"_id,pet_name,img,variety,adopt_id",getone:!0,where:`_id=='${o.adopt_id}'`})},a?{d:"1094e566-2-"+r+"-"+t+",1094e566-0",e:e.p({status:"loading"})}:{},l&&!a?{f:"1094e566-3-"+r+"-"+t+",1094e566-0",g:e.p({status:"more"})}:l||a?{}:{h:"1094e566-4-"+r+"-"+t+",1094e566-0",i:e.p({status:"noMore"})},{j:o._id}))),d:a,e:l&&!a,f:!l&&!a},{g:r,h:u})),{name:"d",path:"a",vueId:"1094e566-0"}),b:e.sr(i,"1094e566-0",{k:"udb"}),c:e.p({collection:"apply","page-size":5,getone:!1,where:e.unref(a)}),d:e.o(l),e:e.p({type:"warn",cancelText:"关闭",confirmText:"确定取消",title:"通知",content:"你确定要取消领养该宠物吗"}),f:e.sr(p,"1094e566-5",{k:"alertDialog"}),g:e.p({type:"dialog"})})}});var n=e._export_sfc(o,[["__scopeId","data-v-1094e566"]]);wx.createComponent(n);
