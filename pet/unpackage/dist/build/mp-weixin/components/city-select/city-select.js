"use strict";var t=require("./citySelect.js"),i=require("../../common/vendor.js");const e={props:{placeholder:{type:String,default:"请输入城市名称"},formatName:{type:String,default:"cityName"},activeCity:{type:Object,default:()=>null},hotCity:{type:Array,default:()=>[]},obtainCitys:{type:Array,default:()=>[]},isSearch:{type:Boolean,default:!0}},data:()=>({toView:"city-letter-Find",scrollTop:0,cityindexs:[],activeCityIndex:"",handleCity:[],serachCity:"",cityData:[]}),computed:{sortItems(){for(let t=0;t<this.handleCity.length;t++)if(this.handleCity[t].isCity){let i=this.handleCity[t].citys;i=i.sort((function(t,i){return t.unicode-i.unicode}))}return this.handleCity},searchDatas(){var t=[];for(let i=0;i<this.cityData.length;i++)-1!==this.cityData[i][this.formatName].indexOf(this.serachCity)&&t.push({oldData:this.cityData[i],name:this.cityData[i][this.formatName]});return t}},created(){this.cityData=this.obtainCitys,this.initializationCity(),this.buildCityindexs()},watch:{obtainCitys(t){this.updateCitys(t)}},methods:{updateCitys(t){t&&t.length&&(this.cityData=t,this.initializationCity(),this.buildCityindexs())},keyInput(t){this.serachCity=t.detail.value},initializationCity(){this.handleCity=[];const t=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","#"];for(let i=0;i<t.length;i++)this.handleCity.push({name:t[i],isCity:!1,citys:[],forName:"city-letter-"+("#"==t[i]?"0":t[i])})},getLetter:i=>t.citySelect.getFirstLetter(i[0]),buildCityindexs(){this.cityindexs=[];for(let t=0;t<this.cityData.length;t++){const i=this.getLetter(this.cityData[t][this.formatName]).firstletter,e=this.getLetter(this.cityData[t][this.formatName]).unicode,a=this.cityIndexPosition(i);-1===this.cityindexs.indexOf(i)&&(this.handleCity[a].isCity=!0,this.cityindexs.push(i)),this.handleCity[a].citys.push({cityName:this.cityData[t][this.formatName],unicode:e,oldData:this.cityData[t]})}},cityindex(t){this.toView=t},cityIndexPosition(t){if(!t)return"";return"#"===t?26:t.charCodeAt(0)-65},cityTrigger(t){this.$emit("cityClick",t.oldData?t.oldData:t)}}};var a=i._export_sfc(e,[["render",function(t,e,a,s,y,c){return i.e({a:a.isSearch},a.isSearch?{b:i.o(((...t)=>c.keyInput&&c.keyInput(...t))),c:a.placeholder}:{},{d:a.activeCity&&!y.serachCity},(a.activeCity&&y.serachCity,{}),{e:a.activeCity&&!y.serachCity},a.activeCity&&!y.serachCity?{f:i.t(a.activeCity[a.formatName]),g:i.o((t=>c.cityTrigger(a.activeCity)))}:{},{h:a.hotCity.length>0&&!y.serachCity},(a.hotCity.length>0&&y.serachCity,{}),{i:a.hotCity.length>0&&!y.serachCity},a.hotCity.length>0&&!y.serachCity?{j:i.f(a.hotCity,((t,e,s)=>({a:i.t(t[a.formatName]),b:e,c:i.o((i=>c.cityTrigger(t,"hot")),e)})))}:{},{k:!y.serachCity},y.serachCity?{}:{l:i.f(c.sortItems,((t,e,a)=>({a:i.t(t.name),b:"city-letter-"+("#"===t.name?"0":t.name),c:i.f(t.citys,((t,e,a)=>({a:i.t(t.cityName),b:e,c:i.o((i=>c.cityTrigger(t)),e)}))),d:e,e:t.isCity})))},{m:y.serachCity},y.serachCity?{n:i.f(c.searchDatas,((e,a,s)=>({a:i.t(e.name),b:i.o((t=>c.cityTrigger(e)),t.inx),c:a}))),o:t.inx}:{},{p:y.scrollTop,q:y.toView,r:!y.serachCity},y.serachCity?{}:{s:i.f(y.handleCity,((t,e,a)=>({a:i.t(t.name),b:t.isCity,c:e,d:i.o((i=>c.cityindex(t.forName)),e)})))})}]]);wx.createComponent(a);
